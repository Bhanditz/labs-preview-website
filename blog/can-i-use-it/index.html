<!DOCTYPE html>
<html>
<head>
	<link href='http://fonts.googleapis.com/css?family=Noto+Sans|Noto+Serif:400,700&subset=latin,greek,cyrillic,latin-ext' rel='stylesheet' type='text/css'>	    
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>  Can I use it? -  Europeana Labs </title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<!-- never cache patterns -->
	<meta http-equiv="cache-control" content="max-age=0">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT">
	<meta http-equiv="pragma" content="no-cache">
    <link rel="stylesheet" href="/css/styleguide.css"/>
    <link rel="stylesheet" href="/css/screen.css" media="all" />
    <link rel="icon" href="/img/favicon.ico" type="image/x-icon">
    <script type="text/javascript" src="//use.typekit.net/otu7ppb.js"></script>
	<style type="text/css">.tk-dejarip{font-family:"dejarip",sans-serif;}.tk-ff-more-web-pro{font-family:"ff-more-web-pro",serif;}</style><link rel="stylesheet" href="http://use.typekit.net/c/a93097/dejarip:i4:i7:n4:n7,ff-more-web-pro:i4:i5:n4:n5.Pyq:N:2,Pyv:N:2,Pyp:N:2,Pyt:N:2,VVb:N:2,VVf:N:2,VQP:N:2,VVd:N:2/d?3bb2a6e53c9684ffdc9a9bf71c5b2a6272be58e6824d2f2e6fb239e8cf4203049013567d271eb11e88b702a26bb8a567985e44d5fde55c54845fe9b45d924f4b355fc32a2986e0d7fa1266c0d2c63e917d6d7dab80e03b8c354710c21216000daed902279c6555b7e05ebfc7ad2788d2c5b10957"><script type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<link href='http://fonts.googleapis.com/css?family=Ubuntu|Open+Sans' rel='stylesheet' type='text/css'>
    
    <link rel="stylesheet" href="/css/labs.css" />
    <script src="/js/jquery-1.9.1.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="/js/lunr.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="/js/mustache.js" type="text/javascript" charset="utf-8"></script>
	<script src="/js/date.format.js" type="text/javascript" charset="utf-8"></script>
	<script src="/js/URI.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="/js/jquery.lunr.search.js" type="text/javascript" charset="utf-8"></script>
	<script src="/js/jquery.pages.js"></script>
	<script src="/js/tagfiltering.js"></script>				
    <script src="/js/labs.js"></script>
    <script type="text/javascript" src="//use.typekit.net/ifv4urq.js"></script>
	<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-49084773-1', 'europeana.eu');
  ga('send', 'pageview');

</script>
</head>
<body class="sg-single-pattern svg"><!--
-->﻿<!-- Begin header -->
<header class="header cf" role="banner">
    <div class="lc">
        <a href="/" class="logo ir"> </a>	
        <a id="hamMenu" href="#" class="nav-toggle nav-toggle-menu icon-rows"><span class="is-vishidden">Menu</span></a>
        <a href="/rss.xml" class="nav-toggle nav-toggle-search icon-rss"><span class="is-vishidden">Rss</span></a>
        <a href="/search" class="nav-toggle nav-toggle-search icon-search"><span class="is-vishidden">Search</span></a>

		
        <form id="search" action="/search" method="get" class="inline-form search-form">
        	
        	<a id="rssUrl" href="/rss.xml" class="icon-rss pull-right"><span class="is-vishidden">Rss</span></a>
            <fieldset>
                <legend class="is-vishidden">Search</legend>
                <label for="search-field" class="is-vishidden">Search</label>
                <input type="text" placeholder="Search" id="search-query" name="q" class="search-field search-query" autocomplete="off">
                <button class="search-submit">
                    <span class="icon-search" aria-hidden="true"></span>
                    <span class="is-vishidden">Search</span>
                </button>
            </fieldset>
        </form>
        <nav id="nav" class="nav">
            <ul>
                <li><a href="/" class="current">Home</a></li>
                <li><a href="/api">APIs</a></li>
                <li><a href="/data">Data</a></li>
                <li><a href="/apps">Apps</a></li>
                <li><a href="/blog">Blog</a></li>                
                <li><a href="/events">Events</a></li>
                <li><a href="/locations">Locations</a></li>
                <li><a href="/support">Support</a></li>
            </ul>
        </nav>
    </div>
	<div class="featureBanner"></div>
</header>
<!-- End header -->
<!--
--><div id="itemHeader" class="post-list grid">

		<div class="block block-content-header">
			<div class="grid__item palm--one-whole push--palm--none three-quarters push--one-quarter">
					<h2 class="title">Can I use it?</h2>
			</div>
		</div>
	
	<div class="grid__item one-quarter palm--one-whole">
		<ul class="tabs tabs-v">
			<li><a href="/blog">&larr;&nbsp;Blog</a></li>
		</ul>
	</div>
	
	<div class="grid__item three-quarters palm--one-whole">
		    <a href="" title="Can I use it? Website">
		        <img src="/img/blog/2014-04-25-Can-I-use-it.png" alt="Can I use it?">
		    </a>

		<div class="b-text">
		    <div class="prose description">
		        <p>Uncovering the technology behind the simple search tool to discover reusable content available in both the Europeana  portal and API.</p>

<p><em>This is an extract from a blog post previously published by Péter Király, software developer at Europeana. To read the full article visit <a href="http://kirunews.blog.hu/2014/02/13/solr_query_facets_in_europeana">http://kirunews.blog.hu/2014/02/13/solr_query_facets_in_europeana</a></em></p>

<p>One of Europeana’s important aims is to make the rights statements of records clear and straightforward. You can imagine, our &gt;2,400 partners have different approaches for licensing their objects, and right now in the database we have 60+ different licence types, in other words the RIGHTS facet has 60+ individual values. Some of them are language or version variations of the same CC licence. Most users don’t want to select from that range of options. But we can categorize these rights statements under 3 main categories:</p>

<ul>
  <li>freely reusable with attribution (CC0, CC BY, CC BY-SA)</li>
  <li>reusable with some restrictions (CC BY-NC, CC BY-NC-SA, CC BY-NC-ND, CC BY-ND, OOC NC)</li>
  <li>reusable only with permissions (licences of the Europeana Rights Framework)</li>
</ul>

<h2 id="how-it-was-done">How it was done</h2>

<p>In Europeana we use Apache Solr for searching. Our data model is called EDM (Europeana Data Model), which has almost 200 fields. We also have special fields for facets and we have some aggregated fields. What we wanted to achieve was to form a new facet from these options, but the most straightforward solution, i.e. to create a new field in Solr, was not an easily implementable option because it would require a full reindexing (it would be another blog entry to explain why that was not possible), so we had to search for another solution. To count the numbers belonging to the individual rights statements in the RIGHTS facet would work, but that’s only good for displaying, and it doesn’t cover the problem of user interaction. To use the RIGHTS field for search turned out to be risky because it interferes with the RIGHTS facet, so that did not worked either. Finally we come up with a fake facet, which has two sides: one on the display side, and one on the search side.</p>

<p>To count the numbers we use a special Solr facet type: query facet. It is a simple, but at the same time a powerful solution. It doesn’t give you a list of existing field values, as a normal facet. In the query facet the input is a query, and the returning value is a single number, which tells you how many records fit the combination of the main query and the query specified in the facet’s parameter. Since we don’t need to know the list of items in the categories, that’s enough for us. We defined three queries:</p>

<ul>
  <li>RIGHTS:(“CC0” OR “CC BY” OR “CC BY SA”)</li>
  <li>RIGHTS:(“CC BY NC” OR “CC BY NC SA” OR “CC BY NC ND” OR “CC BY ND” OR “OOC NC”)</li>
  <li>RIGHTS:(NOT(“CC0” OR “CC BY” OR “CC BY SA” OR “CC BY NC” OR “CC BY NC SA” OR “CC BY NC ND” OR “CC BY ND” OR “OOC NC”))</li>
</ul>

<h3 id="europeana-portal">Europeana portal</h3>

<p>On the Europeana portal we use a fake facet called ”REUSABILITY”, and we use it in our filtering parameter (&amp;qf) as REUSABILITY:open, or REUSABILITY:restricted or REUSABILITY:permission. These are shortcuts for the lengthy queries. We keep the interface (and the URL) clean.</p>

<p>Explore this on the Portal: <a href="http://www.europeana.eu" title="Europeana portal">europeana.eu</a></p>

<h3 id="europeana-api">Europeana API</h3>

<p>In the API we introduced the ”reusability” parameter with the same options as in the portal: “open”, “restricted” and “permission”.</p>

<p>Example API call: <a href="http://europeana.eu/api/v2/search.json?wskey=%5BYOUR%20API%20KEY%5D&amp;query=*%3A*&amp;reusability=open">http://europeana.eu/api/v2/search.json?wskey=%5BYOUR%20API%20KEY%5D&amp;query=<em>%3A</em>&amp;reusability=open</a></p>

<p>Explore this in the API console: <a href="http://labs.europeana.eu/api/console/" title="Europeana APi console">labs.europeana.eu/api/console/</a></p>

<h2 id="further-information">Further information</h2>

<p>For details of how this is implemented, including the actual Solr queries, read my original blog post at <a href="http://kirunews.blog.hu/2014/02/13/solr_query_facets_in_europeana">http://kirunews.blog.hu/2014/02/13/solr_query_facets_in_europeana</a></p>

<p>For more information about the Europeana Data Model see <a href="http://pro.europeana.eu/edm-documentation" title="Europeana Data Model">http://pro.europeana.eu/edm-documentation</a>
To find out more about the Europeana API check the extensive online documentation section at <a href="http://labs.europeana.eu/api/" title="Europeana API documentation">http://labs.europeana.eu/api/</a></p>

<p>Péter Király, April 2014<br />
<a href="http://nl.linkedin.com/in/peterkiraly/">http://nl.linkedin.com/in/peterkiraly/</a></p>
   
		        
 
		       <!-- 
	<div class="tags">
		<i class="icon icon-tag"></i>
		
			<a href="#" class="tag_alt">Re-use</a>
		
			<a href="#" class="tag_alt">Rights</a>
		
			<a href="#" class="tag_alt">Facets</a>
		
		
				
		
		
	</div>

-->                    
		    </div>
		</div>
		
		<hr />
		
	<div class="tags">
		<i class="icon icon-tag"></i>
		
			<a href="#" class="tag_alt">Re-use</a>
		
			<a href="#" class="tag_alt">Rights</a>
		
			<a href="#" class="tag_alt">Facets</a>
		
		
				
		
		
	</div>


    </div>

</div>

﻿<!-- Begin Footer -->
<footer class="footer" role="contentinfo">
    <div class="lc">
		<div class="social-icons">
        	<a class="social-icon icon icon-social-twitter" href="https://twitter.com/EuropeanaTech">&nbsp;</a>
        	<a class="social-icon icon icon-social-facebook" href="https://www.facebook.com/Europeana">&nbsp;</a>
        	<a class="social-icon icon icon-social-googleplus" href="https://plus.google.com/+europeana/posts">&nbsp;</a>
            <a class="social-icon icon icon-social-linkedin" href="https://www.linkedin.com/groups/Europeana-134927/about">&nbsp;</a>
            <a class="social-icon icon icon-social-github" href="https://github.com/europeana">&nbsp;</a>        	
        </div>
        <ul class="nav-footer">
            <li><a href="/">Home</a></li>
            <li><a href="/about">About us</a></li>
            <li><a href="http://europeana.eu/portal/rights/terms-and-policies.html">Terms &amp; policies</a></li>
            <!--<li><a href="#">Sitemap</a></li>-->
        </ul>
        <p class="copyright">Co-funded by the European Union as part of <a href="http://pro.europeana.eu/web/europeana-creative">Europeana Creative</a>.</p>
        <a class="licensehr" rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="/img/cc.png"></a>
        
    </div>
</footer>
<!-- End Footer -->
<!--
--></body>
</html>
